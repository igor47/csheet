[tools]
bun = "latest"
jj = "latest"
dbmate = "latest"
jq = "latest"

[env]
# Optional: Set default port
PORT = "3000"

[tasks.dev]
run = "bun run --watch main.ts"
description = "Start development server with hot reload"

[tasks.start]
run = "bun run main.tsx"
description = "Start production server"

[tasks.install]
run = "bun install"
description = "Install dependencies"

[tasks.dbmate]
run = """
  DB_PATH=$(bun src/config.ts | jq -r '.sqliteDbPath')
  echo "Using database path: $DB_PATH"
  DATABASE_URL="sqlite:$DB_PATH" DBMATE_MIGRATIONS_DIR="./migrations" dbmate "$@"
"""
description = "Run dbmate with configured database path"
